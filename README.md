![ERD](https://github.com/rzwink/ohioready-api/raw/master/ohioready_logo.png "ERD")


## Install

### Install Python3 + Pip + Virtualenv
```shell script
virtualenv venv -p python3
. ./venv/bin/activate
pip install -r requirements.txt
```
### If you are going to modify this script then take advantage of pre-commit hooks
```shell script
pip install pre-commit
pre-commit install
```

## Run locally
Create a file named .env with the following contents in the root directory of the project
```shell script
SECRET_KEY = '<---- put 50 character random string here ---->'
```
and then run these commands
```shell script
python manage.py migrate
python manage.py createsuperuser
python manage.py runserver

```
1. To access the admin portal open a web browser and go to http://127.0.0.1:8000/admin/
2. To access the rest endpoints go to https://127.0.0.1:8000/v1/
3. To access with a token, login to admin, create a token, and then use it in an auth header.
Authorization: Token <put token here>

-or- use JWT tokens

```shell script
curl \
  -X POST \
  -H "Content-Type: application/json" \
  -d '{"username": "davidattenborough", "password": "boatymcboatface"}' \
  http://localhost:8000/api/token/

...
{
  "access":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX3BrIjoxLCJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiY29sZF9zdHVmZiI6IuKYgyIsImV4cCI6MTIzNDU2LCJqdGkiOiJmZDJmOWQ1ZTFhN2M0MmU4OTQ5MzVlMzYyYmNhOGJjYSJ9.NHlztMGER7UADHZJlxNG0WSi22a2KaYSfd1S-AuT7lU",
  "refresh":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX3BrIjoxLCJ0b2tlbl90eXBlIjoicmVmcmVzaCIsImNvbGRfc3R1ZmYiOiLimIMiLCJleHAiOjIzNDU2NywianRpIjoiZGUxMmY0ZTY3MDY4NDI3ODg5ZjE1YWMyNzcwZGEwNTEifQ.aEoAYkSJjoWH1boshQAaTkf8G3yn0kapko6HFRt7Rh4"
}
```
Authorization: Bearer <put access token here>

When this short-lived access token expires, you can use the longer-lived refresh token to obtain another access token:
```shell script

curl \
  -X POST \
  -H "Content-Type: application/json" \
  -d '{"refresh":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX3BrIjoxLCJ0b2tlbl90eXBlIjoicmVmcmVzaCIsImNvbGRfc3R1ZmYiOiLimIMiLCJleHAiOjIzNDU2NywianRpIjoiZGUxMmY0ZTY3MDY4NDI3ODg5ZjE1YWMyNzcwZGEwNTEifQ.aEoAYkSJjoWH1boshQAaTkf8G3yn0kapko6HFRt7Rh4"}' \
  http://localhost:8000/api/token/refresh/

...
{"access":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX3BrIjoxLCJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiY29sZF9zdHVmZiI6IuKYgyIsImV4cCI6MTIzNTY3LCJqdGkiOiJjNzE4ZTVkNjgzZWQ0NTQyYTU0NWJkM2VmMGI0ZGQ0ZSJ9.ekxRxgb9OKmHkfy-zs1Ro_xs1eMLXiR17dIDBVxeT-w"}
```

# Entity Relationship Diagram
![ERD](erd.png "ERD")
![Transitions](transitions.png "ERD")
